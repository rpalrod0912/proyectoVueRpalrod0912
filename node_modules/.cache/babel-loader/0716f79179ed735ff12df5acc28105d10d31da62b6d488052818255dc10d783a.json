{"ast":null,"code":"import { createStore } from \"vuex\";\nimport { auth } from \"../firebaseConfig/firebaseConfig.js\";\n/*eslint-disable*/\nexport default createStore({\n  state: {\n    currentAuth: false\n  },\n  mutations: {\n    setCurrentAuth(state, auth) {\n      state.currentAuth = auth;\n    },\n    logout(state) {\n      state.currentAuth = null;\n    },\n    verifyAuth({\n      commit\n    }) {\n      let self = this;\n      auth.onAuthStateChanged(async function (user) {\n        if (user != null) {\n          self.email = user.email;\n          debugger;\n          self.authentication = true;\n          self.id = user.uid;\n          //self.carritoNumero = await self.commit(\"contarProd\", user.uid);\n        } else {\n          self.authentication = false;\n        }\n        return {\n          auth: self.autentication\n        };\n      });\n    },\n    async contarProd(id) {\n      debugger;\n      let cantidad = 0;\n      const data = await fetch(`http://localhost:3003/v1/api/carts/${id}`).then(res => res.json());\n      for (let i = 0; i <= data.cesta.length - 1; i++) {\n        cantidad += parseInt(data.cesta[i].cantidad);\n      }\n      return cantidad;\n    }\n  }\n});","map":{"version":3,"names":["createStore","auth","state","currentAuth","mutations","setCurrentAuth","logout","verifyAuth","commit","self","onAuthStateChanged","user","email","authentication","id","uid","autentication","contarProd","cantidad","data","fetch","then","res","json","i","cesta","length","parseInt"],"sources":["/home/rafa/Vue/proyectovue/src/store/index.js"],"sourcesContent":["import { createStore } from \"vuex\";\nimport { auth } from \"../firebaseConfig/firebaseConfig.js\";\n/*eslint-disable*/\nexport default createStore({\n  state: { currentAuth: false },\n\n  mutations: {\n    setCurrentAuth(state, auth) {\n      state.currentAuth = auth;\n    },\n    logout(state) {\n      state.currentAuth = null;\n    },\n\n    verifyAuth({ commit }) {\n      let self = this;\n      auth.onAuthStateChanged(async function (user) {\n        if (user != null) {\n          self.email = user.email;\n          debugger;\n          self.authentication = true;\n          self.id = user.uid;\n          //self.carritoNumero = await self.commit(\"contarProd\", user.uid);\n        } else {\n          self.authentication = false;\n        }\n        return { auth: self.autentication };\n      });\n    },\n    async contarProd(id) {\n      debugger;\n      let cantidad = 0;\n      const data = await fetch(`http://localhost:3003/v1/api/carts/${id}`).then(\n        (res) => res.json()\n      );\n      for (let i = 0; i <= data.cesta.length - 1; i++) {\n        cantidad += parseInt(data.cesta[i].cantidad);\n      }\n      return cantidad;\n    },\n  },\n});\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,SAASC,IAAI,QAAQ,qCAAqC;AAC1D;AACA,eAAeD,WAAW,CAAC;EACzBE,KAAK,EAAE;IAAEC,WAAW,EAAE;EAAM,CAAC;EAE7BC,SAAS,EAAE;IACTC,cAAc,CAACH,KAAK,EAAED,IAAI,EAAE;MAC1BC,KAAK,CAACC,WAAW,GAAGF,IAAI;IAC1B,CAAC;IACDK,MAAM,CAACJ,KAAK,EAAE;MACZA,KAAK,CAACC,WAAW,GAAG,IAAI;IAC1B,CAAC;IAEDI,UAAU,CAAC;MAAEC;IAAO,CAAC,EAAE;MACrB,IAAIC,IAAI,GAAG,IAAI;MACfR,IAAI,CAACS,kBAAkB,CAAC,gBAAgBC,IAAI,EAAE;QAC5C,IAAIA,IAAI,IAAI,IAAI,EAAE;UAChBF,IAAI,CAACG,KAAK,GAAGD,IAAI,CAACC,KAAK;UACvB;UACAH,IAAI,CAACI,cAAc,GAAG,IAAI;UAC1BJ,IAAI,CAACK,EAAE,GAAGH,IAAI,CAACI,GAAG;UAClB;QACF,CAAC,MAAM;UACLN,IAAI,CAACI,cAAc,GAAG,KAAK;QAC7B;QACA,OAAO;UAAEZ,IAAI,EAAEQ,IAAI,CAACO;QAAc,CAAC;MACrC,CAAC,CAAC;IACJ,CAAC;IACD,MAAMC,UAAU,CAACH,EAAE,EAAE;MACnB;MACA,IAAII,QAAQ,GAAG,CAAC;MAChB,MAAMC,IAAI,GAAG,MAAMC,KAAK,CAAE,sCAAqCN,EAAG,EAAC,CAAC,CAACO,IAAI,CACtEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CACpB;MACD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIL,IAAI,CAACM,KAAK,CAACC,MAAM,GAAG,CAAC,EAAEF,CAAC,EAAE,EAAE;QAC/CN,QAAQ,IAAIS,QAAQ,CAACR,IAAI,CAACM,KAAK,CAACD,CAAC,CAAC,CAACN,QAAQ,CAAC;MAC9C;MACA,OAAOA,QAAQ;IACjB;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}