{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { auth, signOut } from \"@/firebaseConfig/firebaseConfig.js\";\nimport { API_URL } from \"@/helpers/basicFunctions\";\n/*eslint-disable */\nexport default {\n  name: \"NavBar\",\n  created() {\n    //OBLIGATORIO DE LO CONTRARIO NO PODEMOS TRABAJAR CON VARIABLESDFE VUE CON oAuthStateChanged\n    let self = this;\n    auth.onAuthStateChanged(async function (user) {\n      if (user != null) {\n        self.email = user.email;\n        self.authentication = true;\n        self.id = user.uid;\n        self.carritoNumero = self.$store.state.currentCartLength;\n        //self.carritoNumero = await self.contarProd(user.uid);\n        self.$store.commit(\"setCurrentAuth\", true);\n        self.$store.commit(\"setCurrentCartLength\", await self.contarProd(user.uid));\n        self.$store.commit(\"setCurrentUser\", user.uid);\n      } else {\n        self.authentication = false;\n      }\n    });\n  },\n  data() {\n    return {\n      text: \"\",\n      searchsArray: [],\n      authentication: null,\n      email: \"\",\n      carritoNumero: this.$store.state.currentCartLength,\n      id: null\n    };\n  },\n  methods: {\n    irCarrito() {\n      this.$router.push({\n        name: \"CarritoView\",\n        query: {\n          id: JSON.stringify(this.id)\n        }\n      });\n    },\n    async contarProd(id) {\n      let cantidad = 0;\n      const data = await fetch(`${API_URL}carts/${id}`).then(res => res.json());\n      for (let i = 0; i <= data.cesta.length - 1; i++) {\n        cantidad += parseInt(data.cesta[i].cantidad);\n      }\n      return cantidad;\n    },\n    logOut() {\n      signOut(auth).then(() => {\n        this.authentication = false;\n        this.$store.commit(\"setCurrentAuth\", this.authentication);\n        this.$store.commit(\"setCurrentUser\", null);\n        this.$store.commit(\"setCurrentCartLength\", null);\n        this.$router.go(\"/\");\n      }).catch(error => {\n        console.log(\"ALGO OCURRIO\");\n      });\n    },\n    buscarElementos() {\n      this.$router.push({\n        name: \"BusquedasView\",\n        query: {\n          prodFiltrados: JSON.stringify(this.searchsArray)\n        }\n      });\n    },\n    async fetchAllProductsByValue(val) {\n      const data = await fetch(`${API_URL}productos`).then(res => res.json());\n      let index = 0;\n      let encontrados = [];\n      while (index < data.length) {\n        if (data[index].nombre.split(\" \").join(\"\").toLowerCase().includes(val.split(\" \").join(\"\").toLowerCase())) {\n          encontrados.push(data[index]);\n        }\n        index += 1;\n      }\n      this.searchsArray = encontrados;\n    }\n  },\n  computed: {\n    authentication: false\n  },\n  watch: {\n    text(newval, oldval) {\n      this.fetchAllProductsByValue(newval);\n    },\n    \"$store.state.currentCartLength\": {\n      handler() {\n        this.carritoNumero = this.$store.state.currentCartLength;\n      }\n    },\n    inmediate: true\n  }\n};","map":{"version":3,"mappings":"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","names":["auth","signOut","API_URL","name","created","self","onAuthStateChanged","user","email","authentication","id","uid","carritoNumero","$store","state","currentCartLength","commit","contarProd","data","text","searchsArray","methods","irCarrito","$router","push","query","JSON","stringify","cantidad","fetch","then","res","json","i","cesta","length","parseInt","logOut","go","catch","error","console","log","buscarElementos","prodFiltrados","fetchAllProductsByValue","val","index","encontrados","nombre","split","join","toLowerCase","includes","computed","watch","newval","oldval","handler","inmediate"],"sourceRoot":"","sources":["/home/rafa/Vue/proyectovue/src/components/NavBar.vue"],"sourcesContent":["<template>\n  <v-app-bar class=\"header\" app color=\"#3853D8\" dark>\n    <div class=\"titulo\">\n      <v-hover v-slot:default=\"{ isHovering, props }\" open-delay=\"60\">\n        <router-link to=\"/\">\n          <img\n            v-if=\"isHovering\"\n            v-bind=\"props\"\n            style=\"max-width: 13rem\"\n            src=\"https://i.ibb.co/dJT1MtP/2.png\"\n            alt=\"2\"\n          />\n          <img\n            v-else-if=\"!isHovering\"\n            v-bind=\"props\"\n            style=\"max-width: 13rem\"\n            src=\"https://i.ibb.co/hLsC5XG/whitelogo.png\"\n            alt=\"whitelogo\"\n          />\n        </router-link>\n      </v-hover>\n    </div>\n    <v-spacer></v-spacer>\n    <div class=\"busquedaProd\">\n      <v-text-field\n        color=\"white\"\n        v-model=\"text\"\n        filled\n        variant=\"solo\"\n        label=\"Buscar Producto\"\n        clearable\n      ></v-text-field>\n    </div>\n    <v-btn @click=\"buscarElementos\" icon class=\"mx-1\">\n      <v-icon>mdi-magnify</v-icon>\n    </v-btn>\n    <SearchBar />\n    <v-divider vertical></v-divider>\n    <v-menu>\n      <template v-slot:activator=\"{ props }\">\n        <v-btn icon=\"mdi-account-outline\" v-bind=\"props\"></v-btn>\n      </template>\n\n      <v-list>\n        <v-list-item\n          ><v-list-item-title v-if=\"!this.authentication\"\n            >No has iniciado sesion</v-list-item-title\n          >\n          <v-list-item-title v-else>Hola {{ this.email }}</v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-menu>\n\n    <v-divider vertical></v-divider>\n\n    <v-menu>\n      <template v-slot:activator=\"{ props }\">\n        <v-btn v-if=\"$store.state.currentCartLength === null\" v-bind=\"props\">\n          <v-icon>mdi-cart-outline</v-icon>\n        </v-btn>\n        <v-btn v-else v-bind=\"props\">\n          <v-badge color=\"black\" :content=\"this.carritoNumero\"\n            ><v-icon>mdi-cart-outline</v-icon>\n          </v-badge>\n        </v-btn>\n      </template>\n\n      <v-list>\n        <v-list-item v-if=\"!this.authentication\"\n          ><v-list-item-title>No has iniciado sesion</v-list-item-title>\n        </v-list-item>\n        <v-list-item v-else\n          ><v-list-item-title\n            >Tienes {{ this.carritoNumero }} productos en el\n            carrito</v-list-item-title\n          ><v-btn variant=\"flat\" color=\"success\" @click=\"this.irCarrito\"\n            >Ver Carrito</v-btn\n          >\n        </v-list-item>\n      </v-list>\n    </v-menu>\n    <v-menu>\n      <template v-slot:activator=\"{ props }\">\n        <v-btn icon=\"mdi-menu\" v-bind=\"props\"></v-btn>\n      </template>\n\n      <v-list>\n        <v-list-item\n          ><router-link class=\"linkRouter\" to=\"/\"\n            ><v-list-item-title>Home</v-list-item-title></router-link\n          ></v-list-item\n        >\n        <v-list-item\n          ><router-link class=\"linkRouter\" to=\"/about\"\n            ><v-list-item-title>About</v-list-item-title></router-link\n          ></v-list-item\n        >\n        <v-list-item\n          ><router-link\n            v-if=\"!this.authentication\"\n            class=\"linkRouter\"\n            to=\"/login\"\n            ><v-btn variant=\"flat\" color=\"success\">Login</v-btn></router-link\n          ><v-btn variant=\"flat\" color=\"error\" @click=\"logOut\" v-else\n            >DESCONECTAR</v-btn\n          >\n        </v-list-item>\n        <v-list-item\n          ><router-link class=\"linkRouter\" to=\"/Productos\"\n            ><v-list-item-title>Productos</v-list-item-title></router-link\n          ></v-list-item\n        >\n        <v-list-item\n          ><router-link class=\"linkRouter\" to=\"/Inicio\"\n            ><v-list-item-title>Inicio</v-list-item-title></router-link\n          ></v-list-item\n        >\n        <v-list-item\n          ><router-link class=\"linkRouter\" to=\"/Perfil\"\n            ><v-list-item-title>Perfil</v-list-item-title></router-link\n          ></v-list-item\n        >\n      </v-list>\n    </v-menu>\n  </v-app-bar>\n</template>\n\n<script>\nimport { auth, signOut } from \"@/firebaseConfig/firebaseConfig.js\";\nimport { API_URL } from \"@/helpers/basicFunctions\";\n/*eslint-disable */\nexport default {\n  name: \"NavBar\",\n  created() {\n    //OBLIGATORIO DE LO CONTRARIO NO PODEMOS TRABAJAR CON VARIABLESDFE VUE CON oAuthStateChanged\n    let self = this;\n    auth.onAuthStateChanged(async function (user) {\n      if (user != null) {\n        self.email = user.email;\n        self.authentication = true;\n        self.id = user.uid;\n        self.carritoNumero = self.$store.state.currentCartLength;\n        //self.carritoNumero = await self.contarProd(user.uid);\n        self.$store.commit(\"setCurrentAuth\", true);\n        self.$store.commit(\n          \"setCurrentCartLength\",\n          await self.contarProd(user.uid)\n        );\n        self.$store.commit(\"setCurrentUser\", user.uid);\n      } else {\n        self.authentication = false;\n      }\n    });\n  },\n\n  data() {\n    return {\n      text: \"\",\n      searchsArray: [],\n      authentication: null,\n      email: \"\",\n      carritoNumero: this.$store.state.currentCartLength,\n      id: null,\n    };\n  },\n  methods: {\n    irCarrito() {\n      this.$router.push({\n        name: \"CarritoView\",\n        query: { id: JSON.stringify(this.id) },\n      });\n    },\n    async contarProd(id) {\n      let cantidad = 0;\n      const data = await fetch(`${API_URL}carts/${id}`).then((res) =>\n        res.json()\n      );\n      for (let i = 0; i <= data.cesta.length - 1; i++) {\n        cantidad += parseInt(data.cesta[i].cantidad);\n      }\n      return cantidad;\n    },\n    logOut() {\n      signOut(auth)\n        .then(() => {\n          this.authentication = false;\n          this.$store.commit(\"setCurrentAuth\", this.authentication);\n          this.$store.commit(\"setCurrentUser\", null);\n          this.$store.commit(\"setCurrentCartLength\", null);\n          this.$router.go(\"/\");\n        })\n        .catch((error) => {\n          console.log(\"ALGO OCURRIO\");\n        });\n    },\n    buscarElementos() {\n      this.$router.push({\n        name: \"BusquedasView\",\n        query: { prodFiltrados: JSON.stringify(this.searchsArray) },\n      });\n    },\n    async fetchAllProductsByValue(val) {\n      const data = await fetch(`${API_URL}productos`).then((res) => res.json());\n      let index = 0;\n      let encontrados = [];\n      while (index < data.length) {\n        if (\n          data[index].nombre\n            .split(\" \")\n            .join(\"\")\n            .toLowerCase()\n            .includes(val.split(\" \").join(\"\").toLowerCase())\n        ) {\n          encontrados.push(data[index]);\n        }\n        index += 1;\n      }\n      this.searchsArray = encontrados;\n    },\n  },\n  computed: {\n    authentication: false,\n  },\n  watch: {\n    text(newval, oldval) {\n      this.fetchAllProductsByValue(newval);\n    },\n    \"$store.state.currentCartLength\": {\n      handler() {\n        this.carritoNumero = this.$store.state.currentCartLength;\n      },\n    },\n\n    inmediate: true,\n  },\n};\n</script>\n\n<style>\n.linkRouter {\n  text-decoration: none;\n  text-decoration: inherit;\n  color: inherit;\n}\n.header {\n  height: 73px;\n}\n.busquedaProd {\n  width: 20rem;\n  margin-top: 1.4rem;\n}\n.titulo {\n  display: flex;\n  position: absolute;\n  margin-left: 1rem;\n  margin-right: auto;\n  left: 0;\n  right: 0;\n  text-align: center;\n}\n\n.v-toolbar__title {\n  font-size: 1rem;\n}\n\n.v-badge__badge {\n  font-size: 10px;\n  height: 18px;\n  min-width: 18px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}